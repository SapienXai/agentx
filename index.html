<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrowserX Agent</title>
    <link rel="icon" href="./logo.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <!-- Connect/QR Code Button -->
            <button id="connect-button" class="connect-btn" title="Connect a mobile device">
                <i class="bi bi-qr-code-scan"></i>
            </button>
            <img src="./logo.png" alt="BrowserX Logo" class="logo">
            <h1 class="brand-name">BrowserX</h1>
            <h2>What are we browsing next?</h2>
        </header>

        <!-- Action Box -->
        <section class="action-box">
            <textarea id="goal-input"
                      class="prompt-textarea"
                      rows="3"
                      aria-label="AI agent prompt"
                      placeholder="e.g., 'Scroll today's tech headlines and summarize the top 5 articles about AI.'"></textarea>
            <div class="action-buttons">
                 <!-- The "Schedule" button is kept for UI consistency but is not functional in this implementation -->
                <button class="schedule-btn" disabled>schedule</button>
                <button id="run-button" class="primary">Create & Run Agent</button>
            </div>
        </section>

        <!-- Tasks Section -->
        <main class="tasks-container">
            <nav class="tabs">
                <a href="#active" class="tab-link active" data-target="active-tasks">Tasks</a>
                <a href="#archived" class="tab-link" data-target="archived-tasks">Archive</a>
            </nav>

            <div id="task-lists-wrapper">
                <!-- Task items will be injected by renderer.js -->
                <div id="active-tasks" class="task-list"></div>
                <div id="archived-tasks" class="task-list" style="display: none;"></div>
                <p id="no-tasks-message" class="text-muted">No tasks yet. Create one above to get started!</p>
            </div>
        </main>
    </div>

    <!-- QR Code Modal -->
    <div id="qr-modal" class="modal-overlay d-none">
        <div class="modal-content">
            <button id="close-modal-button" class="close-btn">Ã—</button>
            <h3>Connect a Mobile Device</h3>
            <p class="text-muted">Scan the QR code below to open this control panel on another device.</p>
            <div class="qr-code-wrapper">
               <div class="spinner-border" role="status" id="qr-spinner">
                   <span class="visually-hidden">Loading...</span>
               </div>
               <img id="qr-code-image" src="" alt="QR Code" class="d-none">
            </div>
            <p class="mt-3">Or manually enter this URL:</p>
            <code id="connect-url">Loading...</code>
        </div>
    </div>


    <script src="./progress.js"></script>
    <script src="./renderer.js"></script>
</body>
</html>